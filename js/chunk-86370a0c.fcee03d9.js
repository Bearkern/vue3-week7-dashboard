(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86370a0c"],{"1dde":function(e,t,n){var a=n("d039"),o=n("b622"),c=n("2d00"),l=o("species");e.exports=function(e){return c>=51||!a((function(){var t=[],n=t.constructor={};return n[l]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4355:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),o={class:"container"},c={class:"mt-4"},l={class:"table align-middle"},i=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",null,"畫作"),Object(a["createElementVNode"])("th",null,"畫作名稱"),Object(a["createElementVNode"])("th",null,"年份"),Object(a["createElementVNode"])("th",null,"功能")])],-1),r={style:{width:"200px"}},s={href:"#",class:"text-dark"},d={class:"h5"},u={class:"btn-group btn-group-sm"},b=["disabled","onClick"],m={key:0,class:"spinner-border spinner-grow-sm"},p=Object(a["createTextVNode"])(" 畫作細節 "),g=["disabled","onClick"],h={key:0,class:"spinner-border spinner-grow-sm"},f=Object(a["createTextVNode"])(" 加到收藏 "),j={class:"text-end"},O={class:"table align-middle"},V=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th"),Object(a["createElementVNode"])("th",null,"品名"),Object(a["createElementVNode"])("th",{style:{width:"110px"}},"數量"),Object(a["createElementVNode"])("th",null,"畫作大小")])],-1),v=["disabled","onClick"],N=Object(a["createElementVNode"])("i",{class:"bi bi-x"},null,-1),E=[N],k={class:"input-group input-group-sm"},y=["onUpdate:modelValue"],L={class:"input-group-text"},C={class:"my-5 row justify-content-center"},x={class:"mb-3"},S=Object(a["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),$={class:"mb-3"},w=Object(a["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),B={class:"mb-3"},M=Object(a["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),z={class:"mb-3"},F=Object(a["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),U={class:"mb-3"},q=Object(a["createElementVNode"])("label",{for:"message",class:"form-label"},"給畫家的話",-1),T={class:"text-end"},D=["disabled"];function P(e,t,n,N,P,_){var I=Object(a["resolveComponent"])("Loading"),J=Object(a["resolveComponent"])("Field"),A=Object(a["resolveComponent"])("ErrorMessage"),X=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createVNode"])(I,{active:P.isLoading,"z-index":1060},null,8,["active"]),Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("table",l,[i,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(P.paintings,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e.id},[Object(a["createElementVNode"])("td",r,[Object(a["createElementVNode"])("div",{style:Object(a["normalizeStyle"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(e.imageUrl,")")}])},null,4)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("a",s,Object(a["toDisplayString"])(e.title),1)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",d,Object(a["toDisplayString"])(e.year),1)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",disabled:P.state.paintingLoading===e.id||!e.is_enabled,onClick:function(t){return _.getPainting(e.id)}},[P.state.paintingLoading===e.id?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",m)):Object(a["createCommentVNode"])("",!0),p],8,b),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",disabled:P.state.paintingLoading===e.id||!e.is_enabled,onClick:function(t){return _.addToCollection(e.id)}},[P.state.paintingLoading===e.id?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",h)):Object(a["createCommentVNode"])("",!0),f],8,g)])])])})),128))])]),Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[0]||(t[0]=function(){return _.removeCollections&&_.removeCollections.apply(_,arguments)})}," 清空收藏 ")]),Object(a["createElementVNode"])("table",O,[V,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(P.collections.carts,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e.id},[Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:P.state.paintingLoading===P.painting.id,onClick:function(t){return _.removeCollection(e.id)}},E,8,v)]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",k,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":function(t){return e.qty=t}},null,8,y),[[a["vModelText"],e.qty,void 0,{number:!0}]]),Object(a["createElementVNode"])("div",L,"/ "+Object(a["toDisplayString"])(e.product.unit),1)])]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.product.size),1)])})),128))])])]),Object(a["createElementVNode"])("div",C,[Object(a["createVNode"])(X,{ref:"collectionForm",class:"col-md-6",onSubmit:_.sendCollections},{default:Object(a["withCtx"])((function(e){var n=e.errors;return[Object(a["createElementVNode"])("div",x,[S,Object(a["createVNode"])(J,{id:"name",name:"姓名",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":n["姓名"]}]),modelValue:P.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return P.form.user.name=e}),placeholder:"請輸入姓名",rules:"required"},null,8,["modelValue","class"]),Object(a["createVNode"])(A,{name:"姓名",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",$,[w,Object(a["createVNode"])(J,{id:"email",name:"email",type:"email",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":n["email"]}]),modelValue:P.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return P.form.user.email=e}),placeholder:"請輸入 Email",rules:"email|required"},null,8,["modelValue","class"]),Object(a["createVNode"])(A,{name:"email",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",B,[M,Object(a["createVNode"])(J,{id:"tel",name:"電話",type:"tel",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":n["電話"]}]),modelValue:P.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return P.form.user.tel=e}),placeholder:"請輸入電話",rules:"required|min:8|max:10"},null,8,["modelValue","class"]),Object(a["createVNode"])(A,{name:"電話",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",z,[F,Object(a["createVNode"])(J,{id:"address",name:"地址",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":n["地址"]}]),modelValue:P.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return P.form.user.address=e}),placeholder:"請輸入地址",rules:"required"},null,8,["modelValue","class"]),Object(a["createVNode"])(A,{name:"地址",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",U,[q,Object(a["createVNode"])(J,{name:"message",id:"message",class:"form-control",modelValue:P.form.message,"onUpdate:modelValue":t[5]||(t[5]=function(e){return P.form.message=e}),cols:"30",rows:"10",as:"textarea"},null,8,["modelValue"])]),Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("button",{class:"btn btn-danger",type:"submit",disabled:!P.collections.carts.length}," 友誼收藏 ",8,D)])]})),_:1},8,["onSubmit"])])])}n("99af");var _={data:function(){return{isLoading:!1,paintings:[],painting:{},collections:{carts:[]},state:{paintingLoading:""},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getPaintings:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/products/all")).then((function(t){e.paintings=t.data.products,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},getPainting:function(e){this.$router.push("/painting/".concat(e))},getCollections:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/cart")).then((function(t){e.collections=t.data.data,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},addToCollection:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0,this.state.paintingLoading=e;var a={product_id:e,qty:n};this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/cart"),{data:a}).then((function(e){e.data.success&&(t.getCollections(),t.isLoading=!1,t.state.paintingLoading="",t.$httpMessageState(e,"收藏"))})).catch((function(e){t.isLoading=!1,t.state.paintingLoading="",t.$httpMessageState(e,"收藏")}))},removeCollection:function(e){var t=this;this.isLoading=!0,this.state.paintingLoading=e,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/cart/").concat(e)).then((function(e){t.state.paintingLoading="",t.getCollections(),t.isLoading=!1,t.$httpMessageState(e,"移除收藏品項")})).catch((function(e){t.state.paintingLoading="",t.isLoading=!1,t.$httpMessageState(e.response,"移除收藏品項")}))},removeCollections:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/carts")).then((function(t){e.getCollections(),e.isLoading=!1,e.$httpMessageState(t,"清空收藏")})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"清空收藏")}))},sendCollections:function(){var e=this;this.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/order"),{data:this.form}).then((function(t){e.$refs.collectionForm.resetForm(),e.$router.push("/checkCollections/".concat(t.data.orderId)),e.isLoading=!1,e.$httpMessageState(t,"友誼收藏")})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"友誼收藏")}))}},mounted:function(){this.getPaintings(),this.getCollections()}},I=n("6b0d"),J=n.n(I);const A=J()(_,[["render",P]]);t["default"]=A},8418:function(e,t,n){"use strict";var a=n("a04b"),o=n("9bf2"),c=n("5c6c");e.exports=function(e,t,n){var l=a(t);l in e?o.f(e,l,c(0,n)):e[l]=n}},"99af":function(e,t,n){"use strict";var a=n("23e7"),o=n("da84"),c=n("d039"),l=n("e8b5"),i=n("861d"),r=n("7b0b"),s=n("07fa"),d=n("8418"),u=n("65f0"),b=n("1dde"),m=n("b622"),p=n("2d00"),g=m("isConcatSpreadable"),h=9007199254740991,f="Maximum allowed index exceeded",j=o.TypeError,O=p>=51||!c((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),V=b("concat"),v=function(e){if(!i(e))return!1;var t=e[g];return void 0!==t?!!t:l(e)},N=!O||!V;a({target:"Array",proto:!0,forced:N},{concat:function(e){var t,n,a,o,c,l=r(this),i=u(l,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(c=-1===t?l:arguments[t],v(c)){if(o=s(c),b+o>h)throw j(f);for(n=0;n<o;n++,b++)n in c&&d(i,b,c[n])}else{if(b>=h)throw j(f);d(i,b++,c)}return i.length=b,i}})},b0c0:function(e,t,n){var a=n("83ab"),o=n("5e77").EXISTS,c=n("e330"),l=n("9bf2").f,i=Function.prototype,r=c(i.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=c(s.exec),u="name";a&&!o&&l(i,u,{configurable:!0,get:function(){try{return d(s,r(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-86370a0c.fcee03d9.js.map