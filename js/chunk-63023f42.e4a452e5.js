(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63023f42"],{"07ac":function(e,t,n){var c=n("23e7"),o=n("6f53").values;c({target:"Object",stat:!0},{values:function(e){return o(e)}})},"1dde":function(e,t,n){var c=n("d039"),o=n("b622"),a=n("2d00"),r=o("species");e.exports=function(e){return a>=51||!c((function(){var t=[],n=t.constructor={};return n[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"41d0":function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),o={class:"my-5 row justify-content-center"},a=Object(c["createElementVNode"])("h1",null,"預約收藏",-1),r={class:"table align-middle"},l=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"畫作名稱"),Object(c["createElementVNode"])("th",null,"年份"),Object(c["createElementVNode"])("th",null,"單位")])],-1),i=Object(c["createElementVNode"])("td",{colspan:"2",class:"text-end"},"總數量",-1),d={class:"text-end"},u={class:"table"},s=Object(c["createElementVNode"])("th",{width:"100"},"Email",-1),p=Object(c["createElementVNode"])("th",null,"姓名",-1),b=Object(c["createElementVNode"])("th",null,"電話",-1),m=Object(c["createElementVNode"])("th",null,"地址",-1),j=Object(c["createElementVNode"])("th",null,"預約狀態",-1),O={key:0},f={key:1,class:"text-success"},h={key:0,class:"text-end"},E=Object(c["createElementVNode"])("button",{class:"btn btn-danger",type:"submit"},"確認預約畫作",-1),g=[E];function N(e,t,n,E,N,V){var v=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(v,{active:N.isLoading,"z-index":1060},null,8,["active"]),Object(c["createElementVNode"])("div",o,[a,Object(c["createElementVNode"])("form",{class:"col-md-6",onSubmit:t[0]||(t[0]=Object(c["withModifiers"])((function(){return V.makeAppointment&&V.makeAppointment.apply(V,arguments)}),["prevent"]))},[Object(c["createElementVNode"])("table",r,[l,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(N.appointment.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.product.title),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.product.year),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.qty)+" / "+Object(c["toDisplayString"])(e.product.unit),1)])})),128))]),Object(c["createElementVNode"])("tfoot",null,[Object(c["createElementVNode"])("tr",null,[i,Object(c["createElementVNode"])("td",d,Object(c["toDisplayString"])(N.quantity),1)])])]),Object(c["createElementVNode"])("table",u,[Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[s,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(N.appointment.user.email),1)]),Object(c["createElementVNode"])("tr",null,[p,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(N.appointment.user.name),1)]),Object(c["createElementVNode"])("tr",null,[b,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(N.appointment.user.tel),1)]),Object(c["createElementVNode"])("tr",null,[m,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(N.appointment.user.address),1)]),Object(c["createElementVNode"])("tr",null,[j,Object(c["createElementVNode"])("td",null,[N.appointment.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",f,"預約完成")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",O,"尚未預約"))])])])]),!1===N.appointment.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",h,g)):Object(c["createCommentVNode"])("",!0)],32)])],64)}n("99af"),n("07ac"),n("d3b7");var V={data:function(){return{isLoading:!1,collectionId:"",appointment:{user:{}},products:[],quantity:0}},methods:{getAppointment:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/order/").concat(this.collectionId)).then((function(t){e.appointment=t.data.order,e.products=Object.values(t.data.order.products),e.quantity=e.products.reduce((function(e,t){return e+t.qty}),0),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},makeAppointment:function(){var e=this;this.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/pay/").concat(this.appointment.id)).then((function(t){console.log(t),e.getAppointment(),e.isLoading=!1,e.$httpMessageState(t,"預約畫作")})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"預約畫作")}))}},mounted:function(){this.collectionId=this.$route.params.collectionId,this.getAppointment()}},v=n("6b0d"),y=n.n(v);const k=y()(V,[["render",N]]);t["default"]=k},"6f53":function(e,t,n){var c=n("83ab"),o=n("e330"),a=n("df75"),r=n("fc6a"),l=n("d1e7").f,i=o(l),d=o([].push),u=function(e){return function(t){var n,o=r(t),l=a(o),u=l.length,s=0,p=[];while(u>s)n=l[s++],c&&!i(o,n)||d(p,e?[n,o[n]]:o[n]);return p}};e.exports={entries:u(!0),values:u(!1)}},8418:function(e,t,n){"use strict";var c=n("a04b"),o=n("9bf2"),a=n("5c6c");e.exports=function(e,t,n){var r=c(t);r in e?o.f(e,r,a(0,n)):e[r]=n}},"99af":function(e,t,n){"use strict";var c=n("23e7"),o=n("da84"),a=n("d039"),r=n("e8b5"),l=n("861d"),i=n("7b0b"),d=n("07fa"),u=n("8418"),s=n("65f0"),p=n("1dde"),b=n("b622"),m=n("2d00"),j=b("isConcatSpreadable"),O=9007199254740991,f="Maximum allowed index exceeded",h=o.TypeError,E=m>=51||!a((function(){var e=[];return e[j]=!1,e.concat()[0]!==e})),g=p("concat"),N=function(e){if(!l(e))return!1;var t=e[j];return void 0!==t?!!t:r(e)},V=!E||!g;c({target:"Array",proto:!0,forced:V},{concat:function(e){var t,n,c,o,a,r=i(this),l=s(r,0),p=0;for(t=-1,c=arguments.length;t<c;t++)if(a=-1===t?r:arguments[t],N(a)){if(o=d(a),p+o>O)throw h(f);for(n=0;n<o;n++,p++)n in a&&u(l,p,a[n])}else{if(p>=O)throw h(f);u(l,p++,a)}return l.length=p,l}})},b0c0:function(e,t,n){var c=n("83ab"),o=n("5e77").EXISTS,a=n("e330"),r=n("9bf2").f,l=Function.prototype,i=a(l.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=a(d.exec),s="name";c&&!o&&r(l,s,{configurable:!0,get:function(){try{return u(d,i(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-63023f42.e4a452e5.js.map